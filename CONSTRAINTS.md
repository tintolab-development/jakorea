# JAKorea CMS MVP 개발 제약사항

이 문서는 MVP 개발 시 반드시 준수해야 할 제약사항을 명시합니다.

---

## 🔴 절대 규칙 (프로젝트 시스템 프롬프트 기반)

### 1. 추측 금지

- **요구가 불명확하면 임의로 단정하지 말고 반드시 TODO로 남긴다**
- 예시: 정산 규칙이 불명확하면 추측하지 말고 TODO로 남기고 기본 구조만 제공
- 예시: 알림 채널이 미정이면 TODO로 남기고 구조만 확장 가능하게 설계

### 2. 범위 준수

- **MVP 포함 범위를 넘어서는 기능은 제안만 하고 구현하지 않는다**
- 포함: 프로그램/신청/매칭/일정/강사/정산/관리자 화면
- 제외: 외부 공개 홈페이지, 고급 통계, 다국어, 모바일 앱, 외부 대규모 연동
- 범위 밖 기능이 필요하면 제안만 하고, 구현 전 승인 필요

### 3. 보안 우선

- **개인정보/민감정보 처리 시 최소수집·권한분리·감사로그·마스킹 적용**
- 주민등록번호 등 고위험 정보는 "저장 필요 여부" 확정 전 기본 저장 금지
- 민감정보는 암호화/마스킹/접근로그 적용 (Mock 단계에서도 구조만 설계)
- 감사 로그: 매칭/정산/권한 변경 등 핵심 이벤트 기록 구조 필요

### 4. 과도한 설계 금지

- **MVP에 불필요한 마이크로서비스/복잡한 이벤트 아키텍처 도입 금지**
- 단순하고 확장 가능한 구조로 시작
- 필요 이상의 추상화 지양

### 5. 산출물 필수

- **코드 생성/수정 시 항상 다음을 제공:**
  1. 변경 파일 목록
  2. 파일별 전체 코드 (부분 diff 금지)
  3. 실행/테스트 방법
  4. 남은 TODO / 미정 정책 목록

---

## 🛠 기술 스택 제약사항

### 필수 환경

- **Node.js**: 18 이상
- **pnpm**: 9.12.3 (packageManager로 고정)
- **TypeScript**: 5.9.3
- **React**: 19.2.0
- **Vite**: 7.2.4
- **브라우저**: 최신 Chrome/Edge (Material Design 3 지원)

### 디자인 시스템

- **Material Design 3 (`@material/web`)** 주력 사용
- Tailwindcss 사용 금지 (M3가 주력이므로)
- 커스텀 CSS는 최소화, M3 컴포넌트 우선 사용

### 모노레포 구조

- **Turborepo + pnpm workspace** 구조 유지
- `apps/lms`에서만 작업
- `packages/@jakorea/ui`, `packages/@jakorea/utils` 활용 가능
- 다른 앱(`admin`, `platform`)에 영향 주지 않기

---

## 💾 데이터 제약사항 (Mock 단계)

### Mock 데이터 구조

- **백엔드 없이 프론트엔드만 개발**
- 모든 데이터는 클라이언트 측 Mock 데이터로 처리
- API 호출 구조는 유지하되, 실제 네트워크 요청 대신 Mock 서비스 사용
- 향후 백엔드 연동 시 최소 변경으로 전환 가능한 구조 필요

### 데이터 일관성

- Mock 데이터 간 관계 유지 (예: Program → Sponsor, Application → Program)
- 데이터 ID 체계 일관성 유지 (UUID 권장)
- 상태 변경 시 관련 데이터 동기화 필요 (예: Application 상태 변경 시 Program 영향)

### 데이터 저장

- 브라우저 로컬스토리지/IndexedDB 사용 금지 (새로고침 시 초기화됨)
- 메모리 상태(Zustand)로만 관리
- 필요시 Zustand persist middleware로 localStorage 저장 가능 (단, Mock 단계에서는 선택사항)

---

## 🏗 아키텍처 제약사항

### 라우팅

- **React Router DOM 7.1.3** 사용
- SPA 구조 유지
- 각 도메인별 라우트 구조 설계 필요

### 상태 관리

- **Zustand** 사용 (클라이언트 상태)
- 전역 상태 vs 로컬 상태 구분 명확히
- Mock 데이터는 Zustand 스토어로 관리

### 폼 관리

- **react-hook-form + zod** 조합 사용
- 모든 폼은 react-hook-form으로 처리
- 유효성 검사는 zod 스키마로 정의

### 테이블/리스트

- **@tanstack/react-table** 사용
- 모든 테이블은 react-table 기반
- 필터/정렬/페이지네이션은 react-table 기능 활용

---

## 📐 기능 범위 제약사항

### 포함 범위 (MVP)

1. ✅ 프로그램 관리 (CRUD + 상태 관리)
2. ✅ 신청 관리 (CRUD + 상태 전이)
3. ✅ 강사 매칭 (매칭 확정/변경 + 후보 제안)
4. ✅ 캘린더 기반 일정 관리 (중복 감지 포함)
5. ✅ 강사 DB (CRUD)
6. ✅ 스폰서 관리 (CRUD)
7. ✅ 학교 관리 (CRUD)
8. ✅ 정산 관리 (산출 + Excel 문서 생성)
9. ✅ 관리자 대시보드 (기본 집계)

### 제외 범위 (1차 MVP)

1. ❌ 외부 공개 홈페이지 리뉴얼
2. ❌ 고급 통계/대시보드 (기본 집계만)
3. ❌ 다국어 지원
4. ❌ 모바일 앱 (반응형 웹은 포함)
5. ❌ 외부 대규모 연동 (LMS 등)
6. ❌ 실시간 알림 (구조만 설계, TODO로 남김)
7. ❌ 실제 인증/권한 시스템 (Mock 역할만)

---

## 🔒 보안/개인정보 제약사항

### 개인정보 처리 원칙

- **최소수집**: 필요한 최소한의 정보만 수집
- **권한분리**: 역할별 접근 권한 구분 (Admin/Instructor/School)
- **마스킹**: 민감정보 표시 시 마스킹 처리 (예: 연락처 일부 마스킹)
- **접근로그**: 민감정보 접근 시 로그 기록 구조 (Mock 단계에서 구조만)

### 고위험 정보

- **주민등록번호**: 저장 필요 여부 확정 전 기본 저장 금지
- **계좌번호**: 정산에 필요할 수 있으나 암호화/마스킹 고려
- **민감정보**: Mock 단계에서도 실제 값 대신 샘플 데이터 사용 권장

### 감사 로그

- 매칭 변경 이력
- 정산 생성/수정 이력
- 권한 변경 이력 (향후)
- 구조만 설계하고 Mock 데이터로 구현

---

## 🎨 UI/UX 제약사항

### Material Design 3 컴포넌트 활용 원칙

- **M3 컴포넌트를 최대한 자유롭게 활용**: 디자인이 단조로워지지 않도록 다양한 컴포넌트 사용 권장
- **백오피스에 적합한 UI 패턴 적극 활용**:
  - **Dialog/Modal**: 확인, 폼 입력, 상세 정보 표시 등
  - **Drawer/Panel**: 사이드 패널, 필터 패널, 설정 패널 등
  - **Accordion**: 정보 계층 구조 표시, FAQ, 상세 정보 접기/펼치기
  - **Tabs**: 카테고리별 정보 분류, 단계별 프로세스
  - **Snackbar**: 간단한 알림/피드백
  - **Menu/Dropdown**: 액션 메뉴, 컨텍스트 메뉴
  - **Tooltip**: 추가 정보 표시
  - **List**: 구조화된 데이터 표시, 네비게이션
  - **Stepper**: 다단계 프로세스 (프로그램 등록, 신청 처리 등)
  - **Alert**: 중요한 메시지 표시
- **커스텀 스타일 최소화**: M3 컴포넌트의 기본 스타일과 variant 활용 우선
- **M3 타입스케일, 색상 시스템 준수**: 일관성 유지
- **UI/UX 디자이너 역할 강화**: 각 페이지의 목적에 맞는 최적의 컴포넌트 선택 및 조합

### 컴포넌트 선택 원칙

- 같은 패턴만 반복하지 않고, 각 상황에 맞는 적절한 컴포넌트 선택
- 정보 밀도와 사용자 작업 흐름을 고려한 컴포넌트 선택
- 예시:
  - 간단한 확인: Dialog (AlertDialog)
  - 복잡한 폼 입력: Dialog (FormDialog) 또는 별도 페이지
  - 필터/옵션: Drawer 또는 Accordion
  - 단계별 프로세스: Stepper
  - 카테고리 분류: Tabs
  - 정보 접기/펼치기: Accordion
  - 빠른 피드백: Snackbar

### 색감 Variation 원칙

- **프로젝트 전반에 색감 variation 적극 활용**: 단조로운 디자인 방지, 시각적 구분 강화
- **M3 색상 토큰 확장 활용**:
  - Primary/Secondary/Tertiary 색상 활용
  - Surface variant (dim/bright) 활용
  - Inverse 색상 활용
- **도메인별 색상 테마 적용**:
  - 각 도메인(강사, 스폰서, 학교, 프로그램 등)에 고유한 색상 테마 부여
  - CSS 변수로 관리하여 일관성 유지
  - 예: `--md-sys-color-school-primary`, `--md-sys-color-instructor-primary`
- **컴포넌트별 색상 Variation**:
  - 카드/리스트 아이템에 색상 variation 적용 (지역별, 카테고리별 등)
  - 배경색, 테두리 색상으로 시각적 구분
  - 4-6가지 색상 패턴 순환 적용
- **색상 적용 가이드**:
  - 정보 그룹화: 관련 정보는 유사한 색상 톤 사용
  - 계층 구조: 중요한 정보는 더 진한 색상, 보조 정보는 연한 색상
  - 접근성: 색상만으로 정보를 전달하지 않도록 텍스트/아이콘과 함께 사용
- **색상 토큰 관리**:
  - 전역 CSS 변수로 색상 토큰 정의 (`apps/lms/src/index.css`)
  - M3 색상 시스템 준수
  - 커스텀 색상은 M3 색상 톤과 조화롭게 선택

### 반응형 웹

- 데스크톱 우선, 태블릿 지원
- 모바일 앱은 제외하나 반응형 웹은 포함

### 접근성

- 기본적인 키보드 네비게이션 지원
- 시맨틱 HTML 사용
- ARIA 레이블 필요시 적용 (M3 컴포넌트는 기본 제공)

---

## 🧪 테스트/품질 제약사항

### 현재 단계

- 단위 테스트 프레임워크 미설정 (추후 추가 가능)
- 수동 테스트 중심
- TypeScript 타입 체크는 필수 (`pnpm typecheck`)

### 코드 품질

- ESLint 규칙 준수 (`pnpm lint`)
- Prettier 포맷팅 준수 (`pnpm format`)
- TypeScript strict 모드 (타입 안정성)

---

## 📦 의존성 제약사항

### 사용 가능한 주요 라이브러리

- `react-hook-form`: 폼 관리
- `@tanstack/react-table`: 테이블
- `exceljs`: Excel 문서 생성
- `zustand`: 상태 관리
- `recharts`: 차트 (필요시)
- `@material/web`: 디자인 시스템
- `react-router-dom`: 라우팅
- `zod`: 스키마 검증
- `@hookform/resolvers`: react-hook-form + zod 연동
- `date-fns`: 날짜 처리
- `axios`: API 통신 (Mock용)

### 추가 의존성 추가 시

- MVP 범위에 필요한 것만 추가
- 과도한 라이브러리 도입 지양
- 필요한 기능이 의존성에 없으면 자체 구현 검토

---

## 🔄 개발 프로세스 제약사항

### Git Workflow

- Husky pre-commit hook: `pnpm typecheck` + `pnpm lint` 자동 실행
- 커밋 전 타입 체크 및 린트 통과 필수

### 코드 구조

- 컴포넌트는 기능별로 폴더 구조화
- 재사용 가능한 컴포넌트는 `packages/@jakorea/ui` 고려
- 도메인별로 코드 분리 (Program, Application, Instructor 등)

### 문서화

- 복잡한 로직은 주석 작성
- TODO는 명확하게 남기기
- PROGRESS.md에 의미있는 프롬프트만 기록

---

## ⚠️ 주의사항

### Mock 데이터 특성

- 새로고침 시 상태 초기화됨 (개발 편의성 고려)
- 실제 백엔드 연동 시 최소 변경으로 전환 가능한 구조 설계
- API 인터페이스는 실제 백엔드와 호환되도록 설계

### 성능 고려사항

- Mock 데이터라도 대량 데이터 시나리오 고려 (페이지네이션 필수)
- 리스트 렌더링 최적화 (가상 스크롤 필요시 고려)
- 불필요한 리렌더링 방지 (React.memo, useMemo 적절히 사용)

### 확장성 고려

- 향후 백엔드 연동을 고려한 구조
- API 레이어 추상화 (서비스 레이어 패턴)
- 타입 정의는 백엔드와 호환 가능하도록 설계

---

## 📝 TODO 정책

### TODO로 남겨야 할 사항

1. 불명확한 비즈니스 규칙 (예: 정산 규칙 구체화 필요)
2. 미정인 정책 (예: 알림 채널, 정산 문서 포맷)
3. 향후 구현 항목 (예: 실제 인증 시스템)
4. 기술적 결정 필요 사항 (예: 캘린더 라이브러리 선택)

### TODO 작성 규칙

- 명확한 설명
- 이유나 맥락 포함
- 필요시 이슈 번호나 참조 링크

---

## ✅ 검증 체크리스트

각 Phase 완료 시 다음을 확인:

- [ ] TypeScript 타입 체크 통과 (`pnpm typecheck`)
- [ ] ESLint 검사 통과 (`pnpm lint`)
- [ ] Prettier 포맷팅 적용 (`pnpm format`)
- [ ] 모든 TODO 명확하게 문서화
- [ ] Mock 데이터 구조 일관성 유지
- [ ] Material Design 3 컴포넌트 사용
- [ ] 범위 준수 (MVP 포함 범위 내)
- [ ] PROGRESS.md에 의미있는 진행사항 기록
